{"ast":null,"code":"import React, { useState, useEffect } from \"react\";\nimport { Grid, Image, Icon, Button, GridColumn } from \"semantic-ui-react\";\nimport { size } from \"lodash\";\nimport classNames from \"classnames\";\nimport useAuth from \"../../../hooks/useAuth\";\nimport useCart from \"../../../hooks/useCart\";\nimport { isFavoriteApi, addFavoriteApi, deleteFavoriteApi } from \"../../../api/favorite\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function HeaderGame(props) {\n  const {\n    game\n  } = props;\n  const {\n    poster,\n    title\n  } = game;\n  return /*#__PURE__*/_jsxs(Grid, {\n    className: \"header-game\",\n    children: [/*#__PURE__*/_jsx(Grid.Column, {\n      mobile: 16,\n      tablet: 6,\n      computer: 5,\n      children: /*#__PURE__*/_jsx(Image, {\n        src: poster.url,\n        alt: title,\n        fluid: true\n      })\n    }), /*#__PURE__*/_jsx(Grid.Column, {\n      mobile: 16,\n      tablet: 10,\n      computer: 11,\n      children: /*#__PURE__*/_jsx(Info, {\n        game: game\n      })\n    })]\n  });\n}\n\nfunction Info(props) {\n  const {\n    game\n  } = props;\n  const {\n    title,\n    summary,\n    price,\n    discount,\n    url\n  } = game;\n  const {\n    0: isFavorite,\n    1: setIsFavorite\n  } = useState(false);\n  const {\n    0: realoadFavorite,\n    1: setRealoadFavorite\n  } = useState(false);\n  const {\n    auth,\n    logout\n  } = useAuth();\n  const {\n    addProductCart\n  } = useCart();\n  useEffect(() => {\n    (async () => {\n      const response = await isFavoriteApi(auth.idUser, game.id, logout);\n      if (size(response) > 0) setIsFavorite(true);else setIsFavorite(false);\n    })();\n\n    setRealoadFavorite(false);\n  }, [game, realoadFavorite]);\n\n  const addFavorite = async () => {\n    if (auth) {\n      await addFavoriteApi(auth.idUser, game.id, logout);\n      setRealoadFavorite(true);\n    }\n  };\n\n  const deleteFavorite = async () => {\n    if (auth) {\n      await deleteFavoriteApi(auth.idUser, game.id, logout);\n      setRealoadFavorite(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"header-game__title\",\n      children: [title, /*#__PURE__*/_jsx(Icon, {\n        name: isFavorite ? \"heart\" : \"heart outline\",\n        className: classNames({\n          like: isFavorite\n        }),\n        link: true,\n        onClick: isFavorite ? deleteFavorite : addFavorite\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"header-game__delivery\",\n      children: \"Entrega en 24/48h\"\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"header-game__summary\",\n      dangerouslySetInnerHTML: {\n        __html: summary\n      }\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"header-game__buy\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"header-game__buy-price\",\n        children: [/*#__PURE__*/_jsxs(\"p\", {\n          children: [\"Precio de venta al publico: \", price, \" mxn\"]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"header-game__buy-price-actions\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            children: [\"-\", discount, \"%\"]\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            children: [(price - Math.floor(price * discount) / 100).toFixed(2), \" mxn\"]\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(Button, {\n        className: \"header-game__buy-btn\",\n        onClick: () => addProductCart(url),\n        children: \"COMPRAR\"\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}