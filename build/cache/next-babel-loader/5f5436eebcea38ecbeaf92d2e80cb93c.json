{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport { Container, Menu, Grid, Icon, Label } from \"semantic-ui-react\";\nimport Link from \"next/link\";\nimport { map } from \"lodash\";\nimport BasicModal from \"../../Modal/BasicModal\";\nimport Auth from \"../../Auth\";\nimport useAuth from \"../../../hooks/useAuth\";\nimport useCart from \"../../../hooks/useCart\";\nimport { getMeApi } from \"../../../api/user\";\nimport { getPlatformsApi } from \"../../../api/platform\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function MenuWeb() {\n  var _useState = useState([]),\n      platforms = _useState[0],\n      setPlatforms = _useState[1];\n\n  var _useState2 = useState(false),\n      showModal = _useState2[0],\n      setShowModal = _useState2[1];\n\n  var _useState3 = useState(\"Inicia sesiÃ³n\"),\n      titleModal = _useState3[0],\n      setTitleModal = _useState3[1];\n\n  var _useState4 = useState(undefined),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useAuth = useAuth(),\n      auth = _useAuth.auth,\n      logout = _useAuth.logout;\n\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getMeApi(logout);\n\n            case 2:\n              response = _context.sent;\n              setUser(response);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  }, [auth]);\n  useEffect(function () {\n    _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getPlatformsApi();\n\n            case 2:\n              response = _context2.sent;\n              setPlatforms(response || []);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  }, []);\n\n  var onShowModal = function onShowModal() {\n    return setShowModal(true);\n  };\n\n  var onCloseModal = function onCloseModal() {\n    return setShowModal(false);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"menu\",\n    children: [/*#__PURE__*/_jsx(Container, {\n      children: /*#__PURE__*/_jsxs(Grid, {\n        children: [/*#__PURE__*/_jsx(Grid.Column, {\n          className: \"menu__left\",\n          width: 6,\n          children: /*#__PURE__*/_jsx(MenuPlatforms, {\n            platforms: platforms\n          })\n        }), /*#__PURE__*/_jsx(Grid.Column, {\n          className: \"menu__right\",\n          width: 10,\n          children: user !== undefined && /*#__PURE__*/_jsx(MenuOptions, {\n            onShowModal: onShowModal,\n            user: user,\n            logout: logout\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(BasicModal, {\n      show: showModal,\n      setShow: setShowModal,\n      title: titleModal,\n      size: \"small\",\n      children: /*#__PURE__*/_jsx(Auth, {\n        onCloseModal: onCloseModal,\n        setTitleModal: setTitleModal\n      })\n    })]\n  });\n}\n\nfunction MenuPlatforms(props) {\n  var platforms = props.platforms;\n  return /*#__PURE__*/_jsx(Menu, {\n    children: map(platforms, function (platform) {\n      return /*#__PURE__*/_jsx(Link, {\n        href: \"/games/\".concat(platform.url),\n        children: /*#__PURE__*/_jsx(Menu.Item, {\n          as: \"a\",\n          name: platform.url,\n          children: platform.title\n        })\n      }, platform._id);\n    })\n  });\n}\n\nfunction MenuOptions(props) {\n  var onShowModal = props.onShowModal,\n      user = props.user,\n      logout = props.logout;\n\n  var _useCart = useCart(),\n      productsCart = _useCart.productsCart;\n\n  return /*#__PURE__*/_jsx(Menu, {\n    children: user ? /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Link, {\n        href: \"/orders\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"eye dropper\"\n          }), \"Mis pedidos\"]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/wishlist\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"heart outline\"\n          }), \"Favoritos\"]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/account\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"user outline\"\n          }), user.name, \" \", user.lastname]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          className: \"m-0\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"cart\"\n          }), productsCart > 0 && /*#__PURE__*/_jsx(Label, {\n            color: \"red\",\n            floating: true,\n            circular: true,\n            children: productsCart\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Menu.Item, {\n        className: \"m-0\",\n        onClick: logout,\n        children: /*#__PURE__*/_jsx(Icon, {\n          name: \"power off\"\n        })\n      })]\n    }) : /*#__PURE__*/_jsxs(Menu.Item, {\n      onClick: onShowModal,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        name: \"user outline\"\n      }), \"Mi cuenta\"]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}